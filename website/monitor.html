<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Command Execution Monitor</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/monitor.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
</head>
<body>
    <header>
        <div class="container">
            <h1>üìä Command Execution Monitor</h1>
            <p>Real-time monitoring of AI agent command execution</p>
        </div>
    </header>

    <div class="monitor-container">
        <div class="monitor-sidebar">
            <div class="system-status">
                <h3>üñ•Ô∏è System Status</h3>
                <div class="status-grid">
                    <div class="status-item">
                        <span class="status-label">API Gateway</span>
                        <span class="status-value" id="gatewayStatus">Checking...</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Gemma 3</span>
                        <span class="status-value" id="gemmaStatus">Checking...</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">DeepSeek-R1</span>
                        <span class="status-value" id="deepseekStatus">Checking...</span>
                    </div>
                </div>
            </div>

            <div class="monitor-controls">
                <h3>üéõÔ∏è Monitor Controls</h3>
                <div class="control-group">
                    <label>
                        <input type="checkbox" id="autoRefresh" checked>
                        Auto Refresh
                    </label>
                    <label>
                        <input type="checkbox" id="showTimestamps" checked>
                        Show Timestamps
                    </label>
                    <label>
                        <input type="checkbox" id="filterErrors" checked>
                        Highlight Errors
                    </label>
                </div>
                <div class="control-buttons">
                    <button id="refreshBtn" class="control-btn">üîÑ Refresh</button>
                    <button id="clearBtn" class="control-btn">üóëÔ∏è Clear</button>
                    <button id="exportBtn" class="control-btn">üì• Export</button>
                </div>
            </div>

            <div class="filter-section">
                <h3>üîç Filters</h3>
                <div class="filter-group">
                    <label>Service:</label>
                    <select id="serviceFilter">
                        <option value="all">All Services</option>
                        <option value="api-gateway">API Gateway</option>
                        <option value="ollama-gemma3">Gemma 3</option>
                        <option value="ollama-deepseek">DeepSeek-R1</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Level:</label>
                    <select id="levelFilter">
                        <option value="all">All Levels</option>
                        <option value="info">Info</option>
                        <option value="warning">Warning</option>
                        <option value="error">Error</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="monitor-main">
            <div class="monitor-header">
                <h2>üìã Command Execution Log</h2>
                <div class="monitor-stats">
                    <span class="stat-item">
                        <span class="stat-label">Total Commands:</span>
                        <span class="stat-value" id="totalCommands">0</span>
                    </span>
                    <span class="stat-item">
                        <span class="stat-label">Success Rate:</span>
                        <span class="stat-value" id="successRate">0%</span>
                    </span>
                    <span class="stat-item">
                        <span class="stat-label">Avg Response:</span>
                        <span class="stat-value" id="avgResponse">0ms</span>
                    </span>
                </div>
            </div>

            <div class="log-container" id="logContainer">
                <div class="log-entry info">
                    <div class="log-timestamp">2025-01-10 12:00:00</div>
                    <div class="log-service">system</div>
                    <div class="log-level">info</div>
                    <div class="log-message">Command execution monitor started</div>
                </div>
            </div>
        </div>
    </div>

    <div class="command-details-modal" id="commandModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Command Details</h3>
                <button class="close-btn" id="closeModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="detail-section">
                    <h4>Command</h4>
                    <pre id="commandDetails"></pre>
                </div>
                <div class="detail-section">
                    <h4>Output</h4>
                    <pre id="commandOutput"></pre>
                </div>
                <div class="detail-section">
                    <h4>Metadata</h4>
                    <div id="commandMetadata"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/monitor.js"></script>
</body>
</html>
